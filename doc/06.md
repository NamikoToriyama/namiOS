# 第6章 コンピュータの基本構成
## 6.1 CPU, メモリ、外部記憶装置の関係

- ユーザの作成するプログラムはOSを含めて、外部記憶装置に格納されている
- プログラム起動時 は 外部記憶装置にあるプログラムをメモリに読み込む必要がある
- BIOS(Basic input output system) ... 外部記憶装置からメモリに起動のプログラムをロードさせるのに使う

## 6-2 電源投入時に行われる処理

1. BIOSが起動
2. POST(Power On Self Test)と呼ばれる最低限のハードウェアチェックを行う
    - キーボードやビデオカードが認識できない異常を検出するとビープ音でエラーが発生したことを通知する
3. BIOSは起動装置として指定された外部記憶装置の先頭から512バイト分読み取り、メモリの0x7C00番地にロードする
    - ブートコード、ブートプログラムという
4. BIOSはロードしたブートコードの末尾２バイトが正しいブートフラグであれば、ロードされたブートコードに制御を移行する
    - ダメな場合は起動可能な次の外部記憶装置で同様の処理を行う
    - 全部ダメな場合は処理を停止する
5. 必ず0x7C00番地にロードされ、ここからユーザーが作成したブートコードの開始となる
    - ブートコード自らが必要なプログラムを順次メモリにロードする必要がある
    - 最初は小さなブートコードからはじまり、徐々にOSなどのプログラム全体をロードする過程をブートストラップという

## 6-3 ポートの役割

- ポート ... 電気的な信号の接点。デバイスとCPUなどをつなぐ接点
- キーボードコントローラー(KBC) ... 異なるメーカーのキーボードを利用可能にするために、CPUとキーボードは直接接続されておらず、キーボードを制御するのに特化した装置
    - キーボードの押す感覚は長いのでCPUに割り込みを設定して、無駄なポートの確認時間を減らす

## 6-4 割り込みコントローラの役割

- 割り込み ... プログラムの実行アドレスを特定の値に書き換えること
    - 割り込みベクタテーブルという表形式で書き換える値を指定する
- 割り込みは通常の関数とは違う方法で作成される
    - ここで登録される割り込み用のアドレスはベクタアドレス、ベクタと呼ばれる
    - 割り込み発生時の処理の名前は、割り込み処理 or ISR(Interrupt Service Routine)と呼ばれる
- 割り込みの種類
    - マスカブル割り込み = ソフトウェア割り込み, 抑止可能
    - ノンマスカブル割り込み = ハードウェア割り込み, そうでない
        - CPUに接続された入力信号が変化することにより発生する
        - タイマー、記憶装置などからも割り込みが発生する